<!DOCTYPE html>
<html>
    <head>
        <meta id="viewport" name="viewport" content ="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta charset="utf-8" />
        <link href="styles.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" rel="stylesheet">
        <script type="text/javascript" src="led.js"></script>
        <title>FastLED Web Assembly (WASM) Demo</title>
    </head>

    <body onresize="LED.onresize()" >
        <div class="fullsize">
            <div>
                <h1>FastLED Web Assembly (WASM) Demo</h1>

                <p class="infobox">
                <b>What?</b> Some of the <a href="http://fastled.io">FastLED</a>
                <a href="https://github.com/FastLED/FastLED/tree/master/examples">Demos</a>
                compiled for Web Assembly and now running in the browser using virtual
                LEDs. <br>
                <b>Why?</b> Use it for simulation/testing and demonstration
                of FastLED projects.
                </p>
                <p>
                Demos: <a href="javascript:LED.setDemo('demo_reel100');">Reel100</a>
                <a href="javascript:LED.setDemo('demo_pride');">Pride2015</a>
                <a href="javascript:LED.setDemo('demo_twinklefox');">TwinkleFox</a> 
                <a href="javascript:LED.setDemo('demo_fire2012');">Fire2012</a> 
                <a href="javascript:LED.setDemo('demo_pacifica');">Pacifica</a> 
                <br/>
                Size: <a href="javascript:LED.setSize(5,5);">5x5</a> 
                <a href="javascript:LED.setSize(8,8);">8x8</a> 
                <a href="javascript:LED.setSize(10,10);">10x10</a> 
                <a href="javascript:LED.setSize(16,16);">16x16</a> 
                <a href="javascript:LED.setSize(20,20);">20x20</a> 
                <a href="javascript:LED.setSize(25,25);">25x25</a>
                <a href="javascript:LED.setSize(50,50);">50x50</a> 
                   (or <a href="?cols=20&cols=5">pass cols and rows query parameters)</a>|
                Numbers: <a href="javascript:LED.toggleNumbers();">Toggle</a> 
                <p>
                For more info visit the <a href="https://github.com/jandelgado/fastled-wasm">
                    github project page</a>.
                Like it? Have also a look at <a href="https://jandelgado.github.io/jled-wasm/">JLed-WASM</a>.
                </p>
            </div>

            <div id="stripe-container">
                <canvas id="ledstripe"/>
            </div>
            <div id="matrix-container">
                <canvas id="ledmatrix"/>
            </div>
        </div>

        <script>
            var Module = {
                onRuntimeInitialized: function() {
                    console.log("WASM runtime initialized.");
                        [cols, rows] = [8,8];

                        // cols and rows can be overriden in the URL
                        const params= new URL(window.location).searchParams;
                        if (params.get("cols")) {
                            cols = parseInt(params.get('cols'));
                        }
                        if (params.get("rows")) {
                            rows = parseInt(params.get('rows'));
                        }
                        LED.start(cols, rows);
                }
            };
        </script>
        <script type="text/javascript" src="fastled.js"></script>
    </body>

</html>
